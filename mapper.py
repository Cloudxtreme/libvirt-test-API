#!/usr/bin/env python
#
# libvirt-test-API is copyright 2010 Red Hat, Inc.
#
# libvirt-test-API is free software: you can redistribute it and/or modify it
# under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 2 of the License, or
# (at your option) any later version. This program is distributed in
# the hope that it will be useful, but WITHOUT ANY WARRANTY; without
# even the implied warranties of TITLE, NON-INFRINGEMENT,
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
#
# The GPL text is available in the file COPYING that accompanies this
# distribution and at <http://www.gnu.org/licenses>.
#
# This module help form new lists from original list generated by module parser,
# the purpose is to get useful information about a testrun.
#

import copy

class Mapper(object):

    def __init__(self, testcases_list):
        self.testcases_list = copy.deepcopy(testcases_list)

    def get_package_tripped(self):
        """ Remove the package information to form a new dictionary """
        tripped_cases_list = []

        for testcase in self.testcases_list:
            tripped_case = {}
            casename = testcase.keys()[0]

            if casename == 'sleep':
                tripped_cases_list.append(testcase)
                continue

            testcases_params = testcase.values()[0]
            tripped_case[casename] = testcases_params

            tripped_cases_list.append(tripped_case)
        return tripped_cases_list
