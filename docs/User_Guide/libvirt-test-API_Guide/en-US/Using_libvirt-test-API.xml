<?xml version='1.0'?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
]>

<chapter id="libvirt-test-API-Using_libvirt-test-API">
	<title>Using libvirt-test-API</title>

  <para>After the appropriate test cases and configuration files have been created for the desired test run libvirt-test-API can run the tests and generate the log file.</para>

  <para>The following section provides information about running a test and working with log files.</para>


	<section id="Using_libvirt-test-API-Running_a_test">
	  <title>Running a test</title>

	  <para>The <filename>main.py</filename> file, located in the root directory of the test tool, is the file that runs the test and performs other operations in libvirt-test-API.</para>

    <para>To run a test, from the libvirt-test-API root directory enter:</para>
<screen>
# python main.py
</screen>

    <para>The following switches can be used with the above command:</para>
    <example>
      <title>python main.py switches</title>
<screen>
-C, --configfile   Specify the configuration file to parse, default is 'case.conf'.
-D, --delete-log   Delete a log item.
-H, --help         Display the command usage.
-L, --xmlfile      Specify the name of the log file, default is 'log.xml'.
</screen>
    </example>

    <para>Libvirt-test-API runs the test and generates the log file.</para>

  </section><!--End Running a test-->


  <section id="Using_libvirt-test-API-Working_with_log_files">
    <title>Working with log files</title>

    <bridgehead renderas="sect3">Viewing the log file</bridgehead>
    <para>Libvirt-test-API automatically generates the log file on the first test run. If it is not specified to create another log file, subsequent test runs will append information to the log file.</para>
    <para>The log file contains the following information about the test run:</para>
    <itemizedlist>
      <listitem>
        <para><application>Testrunid</application>: is a series of numbers that denotes the date and time (YYYYMMDDHHMMSS) of each test run. For example, 20090930151144, meaning 2009/09/30 15:11:44.</para>
      </listitem>
      <listitem>
        <para><application>Testid</application>: lists tests in the log file starting from 001.</para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Deleting log information</bridgehead>

    <para>The switch <command>-D, --delete-log</command> in the <command>python main.py</command> command can be used to delete a test item, a test run, or all test runs in a log file.</para>
    <para>For example:</para>
    <itemizedlist>
      <listitem>
        <para>To delete the test item (testid) in the test run (testrunid):</para>
<screen>
# python main.py -D log.xml testrunid testid
</screen>
      </listitem>
      <listitem>
        <para>To delete the test run (testrunid):</para>
<screen>
# python main.py -D log.xml testrunid
</screen>
      </listitem>
      <listitem>
        <para>To delete all test runs:</para>
<screen>
# python main.py -D log.xml all
</screen>
      </listitem>
    </itemizedlist>

	</section><!--End Working with log files-->


</chapter>
